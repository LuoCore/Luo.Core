
@{
}
@using Luo.Core.Common
@section StyleCss {
    <link href="~/css/login.css" rel="stylesheet" asp-append-version="true" />
}
    <div class="layadmin-user-login layadmin-user-display-show" id="LAY-user-login" style="display: none;">

        <div class="layadmin-user-login-main">
            <div class="layadmin-user-login-box layadmin-user-login-header">
                <h2>LuoCoreAdmin</h2>
                <p>LuoCore 后台管理系统</p>
            </div>
            <div class="layadmin-user-login-box layadmin-user-login-body layui-form">
                <div class="layui-form-item">
                    <label class="layadmin-user-login-icon layui-icon layui-icon-username" for="LAY-user-login-username"></label>
                    <input type="text" name="username" id="LAY-user-login-username" lay-verify="required" placeholder="用户名" class="layui-input">
                </div>
                <div class="layui-form-item">
                    <label class="layadmin-user-login-icon layui-icon layui-icon-password" for="LAY-user-login-password"></label>
                    <input type="password" name="password" id="LAY-user-login-password" lay-verify="required" placeholder="密码" class="layui-input">
                </div>
                <div class="layui-form-item">
                    <div class="layui-row">
                        <div class="layui-col-xs7">
                            <label class="layadmin-user-login-icon layui-icon layui-icon-vercode" for="LAY-user-login-vercode"></label>
                            <input type="text" name="vercode" id="LAY-user-login-vercode" lay-verify="required" placeholder="图形验证码" class="layui-input">
                        </div>
                        <div class="layui-col-xs5">
                            <div style="margin-left: 10px;">
                                <img src="/User/Captcha?@DateTime.Now.DateToTimeStamp()" class="layadmin-user-login-codeimg" id="userGetVercode">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item" style="margin-bottom: 20px;">
                    <input type="checkbox" name="remember" lay-skin="primary" title="记住密码">
                    <a href="forget.html" class="layadmin-user-jump-change layadmin-link" style="margin-top: 7px;">忘记密码？</a>
                </div>
                <div class="layui-form-item">
                    <button class="layui-btn layui-btn-fluid" lay-submit lay-filter="LAY-user-login-submit">登 入</button>
                </div>
               
            </div>
        </div>

        <div class="layui-trans layadmin-user-login-footer">

            <p>© @DateTime.Now.Year <a href="http://www.luocore.com/" target="_blank">luocore.com</a></p>
        </div>

       

    </div>

    @section Scripts {
        <script>
            layui.use(['index', 'user'], function () {
                var $ = layui.$
                    , setter = layui.setter
                    , admin = layui.admin
                    , form = layui.form
                    , router = layui.router()
                    , search = router.search;
                form.render();

                $("#userGetVercode").click(function () {
                    RefreshCerCode();
                });

                function RefreshCerCode()
                {
                    d = new Date();
                    $("#userGetVercode").attr("src", "/User/Captcha?" + d.getTime());
                }

                //提交
                form.on('submit(LAY-user-login-submit)', function (obj) {

                 

                    $.ajax({
                        type: 'Post',
                        url: '/User/Login',
                        data: obj.field,
                        dataType: 'jsonp',
                        success: function (res) {
                            console.log(res);
                            //登入成功的提示与跳转
                            //layer.msg('登入成功', {
                            //    offset: '15px'
                            //    , icon: 1
                            //    , time: 1000
                            //}, function () {
                            //    location.href = '../'; //后台主页
                            //});
                            res.
                            RefreshCerCode();
                        }, error: function (e) {
                            console.log(e);
                            layer.msg('请求异常，请重试', { shift: 6 });
                        }

                    });
                });
                //实际使用时记得删除该代码
                layer.msg('为了方便演示，用户名密码可随意输入', {
                    offset: '15px'
                    , icon: 1
                });
            });
        </script>
    }